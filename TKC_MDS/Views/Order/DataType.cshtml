@{
	ViewData["Title"] = "DataType";
}
<div id="kt_app_content" class="app-content flex-column-fluid">
	<!--begin::Content container-->
	<div id="kt_app_content_container" class="app-container container-xxl">

		<form onsubmit="return false" id="data_type_form">
		<!--begin::Row-->
		<div class="row gy-5 g-xl-10">
			<div class="col-xl-1  "></div>

			<!--begin::Col-->
			<div class="col-xl-10  ">
				<!--begin::Table Widget 5-->
				<div class="card card-flush h-xl-100">
					<!--begin::Card header-->
					<div class="card-header pt-7">
						<!--begin::Title-->
						<h3 class="card-title align-items-start flex-column">
							<span class="card-label fw-bold text-dark">รูปแบบข้อมูล</span>
						</h3>
						<!--end::Title-->
						<!--begin::Actions-->
						<!--end::Actions-->
					</div>
					<!--end::Card header-->
					<!--begin::Card body-->

					<div class="card-body table-responsive">
						<!--begin::Table-->
						<table class="table align-middle fs-6 gy-3" id="kt_table_widget_5_table">
							<!--begin::Table head-->
							<!--begin::Table row-->
							<tbody>
								<tr class="text-start  fw-bold fs-7 text-uppercase gs-0">
									<th class="text-end  text-gray-400 pe-3 min-w-100px">
										ลูกค้า :
									</th>
									<td class="text-end pe-3 min-w-50px">
										<select class="form-select form-select-sm form-select-solid w-200px " id="custumer_select" >
											<option value="0" >
												เลือกลูกค้า
											</option>
											<option value="1">4302-MITSUBISHI P/C</option>
											<option value="2">4303-TOYOTA </option>

										</select>
									</td>
								</tr>
								<tr class="text-start  fw-bold fs-7 text-uppercase gs-0">
									<th class="text-end  text-gray-400 pe-3 min-w-100px">
										ประเภทข้อมูล :
									</th>
									<td class="text-end pe-3 min-w-50px">
										<select class="form-select form-select-sm form-select-solid w-200px" id="select_data_type" >
											<option value="0" >
												เลือกประเภทข้อมูล
											</option>
											<option value="1">01- P/O</option>
											<option value="2">02- Forecast </option>
										</select>
									</td>
									<td class="text-start pe-3 min-w-50px">
										<button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#kt_modal_add_user" onclick="showDialogAddUser()">
											เพิ่ม
										</button>
									</td>

								</tr>
								<tr class="text-start  fw-bold fs-7 text-uppercase gs-0">
									<th class="text-end  text-gray-400 pe-3 min-w-100px">
										เป็นข้อมูล
										P/O:
									</th>
									<td class="text-end pe-3 min-w-50px">
										<select class="form-select form-select-sm form-select-solid w-200px " data-control="select2" >
											<option value="1" selected="selected" data-select2-id="select2-data-9-khj4">Yes</option>
											<option value="2">No</option>

										</select>
									</td>
									<th class="text-end  text-gray-400 pe-3 min-w-150px">
										สร้างรายงานMDSด้วย
										:
									</th>
									<td class="text-start pe-3 min-w-30px"> <input type="checkbox" checked="checked" name="Checkboxes1"></td>
									<th class="text-end  text-gray-400 pe-3 min-w-100px">
										ใช้พิมพ์POS
										:
									</th>
									<td class="text-start pe-3 min-w-30px"> <input type="checkbox" checked="checked" name="Checkboxes1"></td>
								</tr>
								<tr class="text-start  fw-bold fs-7 text-uppercase gs-0">
									<th class="text-end  text-gray-400 pe-3 min-w-100px">
										แสดงในรายงานMDS :
									</th>
									<td class="text-end pe-3 min-w-50px">
										<select class="form-select form-select-sm form-select-solid w-200px " data-control="select2" data-placeholder="Select Hours" data-hide-search="true" data-select2-id="select2-data-10-wouk" tabindex="-1" aria-hidden="true" data-kt-initialized="1">
											<option value="1" selected="selected" data-select2-id="select2-data-12-ldlw">Yes</option>
											<option value="2">No</option>

										</select>
									</td>

								</tr>
								<tr class="text-start  fw-bold fs-7 text-uppercase gs-0">

									<th class="text-end  text-gray-400 pe-3 min-w-100px">
										รวมเข้ากับ
										:
									</th>
									<td class="text-end pe-3 min-w-50px">
										<select class="form-select form-select-sm form-select-solid w-200px" >
											<option value="1" selected="selected" data-select2-id="select2-data-15-qa4x">99-ไม่รวม</option>
											<option value="2">98-รวม</option>

										</select>
									</td>
								</tr>
								<tr class="text-start  fw-bold fs-7 text-uppercase gs-0">
									<th class="text-end  text-gray-400 pe-3 min-w-100px">
										ลบข้อมูลก่อนนำเข้า :
									</th>
									<td class="text-start pe-3 min-w-30px text-danger">
										<input type="checkbox" checked="checked" name="Checkboxes1">
										*ลบข้อมูลเก่าที่ชื่อไฟล์เหมือนกัน
									</td>
								</tr>
								<tr class="text-start  fw-bold fs-7 gs-0">
									<th class="text-end  text-gray-400 pe-3 min-w-100px">
										หนึ่งแถวข้อมูลมีหลายDue :
									</th>
									<td class="text-start pe-3 min-w-30px"> <input type="checkbox" checked="checked" name="Checkboxes1"></td>
								</tr>
								<tr class="text-start  fw-bold fs-7  gs-0">
									<th class="text-end  text-gray-400 pe-3 min-w-100px"></th>
									<td class="text-start pe-3 min-w-30px">
										<div class="form-group">
											<div class="radio-inline">
												<label class="radio">
													<input type="radio" name="radios2">
													<span></span>
													Due สลับกับ Qty
												</label>
												<label class="radio">
													<input type="radio" name="radios2">
													<span></span>
													Due ติดกับ Due
												</label>
											</div>
										</div>

									</td>
								</tr>

								<tr class="text-start  fw-bold fs-7 text-uppercase gs-0">
									<th class="text-end  text-gray-400 pe-3 min-w-100px">
										จำนวนของข้อมูลใน 1 ชุด
										:
									</th>
									<td class="text-end pe-3 min-w-50px">
										<input class="form-control" type="text" id="example-text-input" style="width: 50%;">
									</td>
								</tr>
								<tr class="text-start  fw-bold fs-7 text-uppercase gs-0">
									<th class="text-end  text-gray-400 pe-3 min-w-100px">
										จำนวนของชุดข้อมูลใน 1 แถว
										:
									</th>
									<td class="text-end pe-3 min-w-50px">
										<input class="form-control" type="text" id="example-text-input" style="width: 50%;">
									</td>
								</tr>
								<tr class="text-start  fw-bold fs-7 text-uppercase gs-0">
									<th class="text-end  text-gray-400 pe-3 min-w-100px">
										ความยาวตัวอักษรของข้อมูล
										1 ชุด
										:
									</th>
									<td class="text-end pe-3 min-w-50px">
										<input class="form-control " type="text" id="example-text-input" style="width: 50%;">
									</td>
								</tr>
								<tr class="text-start  fw-bold fs-7 text-uppercase gs-0">
									<th class="text-end  text-gray-400 pe-3 min-w-100px">
										ประเภทไฟล์
										:
									</th>
									<td class="text-end pe-3 min-w-50px">
										<select class="form-select form-select-sm form-select-solid w-200px" >
											<option value="1" selected="selected" data-select2-id="select2-data-18-zpkj">
												แถวข้อมูลมีตัวคั่นเช่น , | Tab
											</option>
											<option value="2">เป็นแถวข้อมูลที่ไม่มีตัวคั่น</option>

										</select>
									</td>
								</tr>
								<tr class="text-start  fw-bold fs-7 text-uppercase gs-0">
									<th class="text-end  text-gray-400 pe-3 min-w-100px"></th>
									<td class="text-end pe-3 min-w-50px">
										<select class="form-select form-select-sm form-select-solid w-200px select2-hidden-accessible" data-control="select2" data-placeholder="Select Hours" data-hide-search="true" data-select2-id="select2-data-19-m75q" tabindex="-1" aria-hidden="true" data-kt-initialized="1">
											<option value="1" selected="selected" data-select2-id="select2-data-21-9nlv">,</option>
											<option value="2">|</option>
											<option value="3">Tab</option>

										</select><span class="select2 select2-container select2-container--bootstrap5" dir="ltr" data-select2-id="select2-data-20-w6hj" style="width: 100%;"><span class="selection"><span class="select2-selection select2-selection--single form-select form-select-sm form-select-solid w-200px" role="combobox" aria-haspopup="true" aria-expanded="false" tabindex="0" aria-disabled="false" aria-labelledby="select2-khxj-container" aria-controls="select2-khxj-container"><span class="select2-selection__rendered" id="select2-khxj-container" role="textbox" aria-readonly="true" title=",">,</span><span class="select2-selection__arrow" role="presentation"><b role="presentation"></b></span></span></span><span class="dropdown-wrapper" aria-hidden="true"></span></span>
									</td>
								</tr>
								<!--end::Table row-->
								<!--end::Table head-->

							</tbody>
						</table>
						<!--end::Table-->
						<div class="d-flex justify-content-center">
								<a class="btn btn-sm fw-bold btn-primary me-2" onclick="addDataTypeCus()">บันทึก</a>
							<a class="btn btn-sm fw-bold btn-secondary me-2">ยกเลิก</a>

						</div>

					</div>
					<div class="card-body">
						<!--begin::Table-->
						<table class="table align-middle fs-6 gy-3 table-striped table-bordered " id="kt_table_widget_5_table">
							<!--begin::Table head-->
							<thead>
								<!--begin::Table row-->
								<tr class="text-start  fw-bold fs-7 text-uppercase gs-0">
									<th class="text-start  text-gray-400 pe-3 min-w-10px">#</th>
									<th class="text-start  text-gray-400 pe-3 min-w-100px">
										ฟิลด์ :
									</th>
									<th class="text-center  text-gray-400 pe-3 min-w-100px">
										ชุดข้อมูล(นับจาก0)
									</th>

								</tr>

								<!--end::Table row-->
							</thead>
							<!--end::Table head-->
							<tbody>
								<tr>
									<td class="text-start  pe-3 min-w-10px">1</td>
									<td class="text-center  pe-3 min-w-100px">
										<select class="form-select form-select-sm form-select-solid w-200px" >
											<option value="0"> </option>
											<option value="1" selected="" data-select2-id="select2-data-24-5bzm">OrderNo</option>
											<option value="2">PONo</option>
											<option value="3">DueDate-DMY</option>
											<option value="4">PartNo</option>
											<option value="5">Qty</option>
											<option value="6">PlantCode</option>

										</select>
									</td>
									<td class="text-center pe-3 min-w-100px">
										<input type="text" class="text-center" value="0">
										</td>

								</tr>
								<tr>
									<td class="text-start  pe-3 min-w-10px">2</td>
									<td class="text-center  pe-3 min-w-100px">
										<select class="form-select form-select-sm form-select-solid w-200px" >
											<option value="0"> </option>
											<option value="1">OrderNo</option>
											<option value="2" selected="" data-select2-id="select2-data-27-l98z">PONo</option>
											<option value="3">DueDate-DMY</option>
											<option value="4">PartNo</option>
											<option value="5">Qty</option>
											<option value="6">PlantCode</option>

										</select>
										
									</td>
									<td class="text-center  pe-3 min-w-100px">
										<input type="text" class="text-center" value="1">
										</td>

								</tr>
								<tr>
									<td class="text-start  pe-3 min-w-10px">3</td>
									<td class="text-center  pe-3 min-w-100px">
										<select class="form-select form-select-sm form-select-solid w-200px" >
											<option value="0"> </option>
											<option value="1">OrderNo</option>
											<option value="2">PONo</option>
											<option value="3" selected="" data-select2-id="select2-data-30-1ayw">DueDate-DMY</option>
											<option value="4">PartNo</option>
											<option value="5">Qty</option>
											<option value="6">PlantCode</option>

										</select>
									</td>
									<td class="text-center  pe-3 min-w-100px"><input type="text" class="text-center" value="2"></td>

								</tr>
								<tr>
									<td class="text-start  pe-3 min-w-10px">4</td>
									<td class="text-center  pe-3 min-w-100px">
										<select class="form-select form-select-sm form-select-solid w-200px" >
											<option value="0"> </option>
											<option value="1">OrderNo</option>
											<option value="2">PONo</option>
											<option value="3">DueDate-DMY</option>
											<option value="4" selected="" data-select2-id="select2-data-33-cf1n">PartNo</option>
											<option value="5">Qty</option>
											<option value="6">PlantCode</option>

										</select>
									</td>
									<td class="text-center  pe-3 min-w-100px"><input type="text" class="text-center" value="3"></td>

								</tr>
								<tr>
									<td class="text-start  pe-3 min-w-10px">5</td>
									<td class="text-center  pe-3 min-w-100px">
										<select class="form-select form-select-sm form-select-solid w-200px " >
											<option value="0"> </option>
											<option value="1">OrderNo</option>
											<option value="2">PONo</option>
											<option value="3">DueDate-DMY</option>
											<option value="4">PartNo</option>
											<option value="5" selected="" data-select2-id="select2-data-36-lv5m">Qty</option>
											<option value="6">PlantCode</option>

										</select>
									</td>
									<td class="text-center  pe-3 min-w-100px"><input type="text" class="text-center" value="4"></td>

								</tr>
								<tr>
									<td class="text-start  pe-3 min-w-10px">6</td>
									<td class="text-center  pe-3 min-w-100px">
										<select class="form-select form-select-sm form-select-solid w-200px " >
											<option value="0"> </option>
											<option value="1">OrderNo</option>
											<option value="2">PONo</option>
											<option value="3">DueDate-DMY</option>
											<option value="4">PartNo</option>
											<option value="5">Qty</option>
											<option value="6" selected="" data-select2-id="select2-data-39-hqlb">PlantCode</option>

										</select>
									</td>
									<td class="text-center  pe-3 min-w-100px"><input type="text" class="text-center" value="5"></td>

								</tr>
							</tbody>
						</table>
						<!--end::Table-->


					</div>
					<!--end::Card body-->
				</div>
				<!--end::Table Widget 5-->
			</div>
			<!--end::Col-->
		</div>
		<!--end::Row-->
		</form>
	</div>
	<!--end::Content container-->
</div>

<!--::popup-->
<div class="modal fade" id="modal_add_user"  style="display: none;" >
	<!--begin::Modal dialog-->
	<div class="modal-dialog modal-dialog-centered mw-650px">
		<!--begin::Modal content-->
		<div class="modal-content">
			<!--begin::Modal header-->
			<div class="modal-header" id="kt_modal_add_user_header">
				<!--begin::Modal title-->
				<h2 class="fw-bold">รายการประเภทข้อมูล</h2>
				<!--end::Modal title-->
				<!--begin::Close-->
				<div class="btn btn-icon btn-sm btn-active-icon-primary" data-kt-users-modal-action="close" onclick="showDialogAddUser()">
					<i class="ki-duotone ki-cross fs-1">
						<span class="path1"></span>
						<span class="path2"></span>
					</i>
				</div>
				<!--end::Close-->
			</div>
			<!--end::Modal header-->
			<!--begin::Modal body-->
			<div class="modal-body px-5 my-7">
				<!--begin::Form-->
				<form id="kt_modal_add_user_form" class="form" action="#" onsubmit="return false">
					<!--begin::Scroll-->
					<div class="d-flex flex-column scroll-y px-5 px-lg-10" id="kt_modal_add_user_scroll" data-kt-scroll="true" data-kt-scroll-activate="true" data-kt-scroll-max-height="auto" data-kt-scroll-dependencies="#kt_modal_add_user_header" data-kt-scroll-wrappers="#kt_modal_add_user_scroll" data-kt-scroll-offset="300px" style="max-height: 475px;">
						<!--begin::Input group-->
						<!--end::Input group-->
						<!--begin::Input group-->
						<div class="fv-row mb-7">
							<!--begin::Label-->
							<label class=" fw-semibold fs-6 mb-2">ประเภทข้อมูล </label>
							<!--end::Label-->
							<!--begin::Input-->
							<input type="text" id="type_name" class="form-control form-control-solid mb-3 mb-lg-0">
							<!--end::Input-->
							<button type="submit" class="btn btn-primary mt-4" onclick="addDataType()">บันทึก</button>

						</div>
						<!--end::Input group-->

					</div>
					<!--end::Scroll-->

				</form>
				<div class="card-body">
					<!--begin::Table-->
					<table class="table align-middle fs-6 gy-3 table-striped table-bordered " id="kt_table_widget_5_table">
						<!--begin::Table head-->
						<thead>
							<!--begin::Table row-->
							<tr class="text-start  fw-bold fs-7 text-uppercase gs-0">
								<th class="text-start  text-gray-400 pe-3 min-w-10px">#</th>
								<th class="text-start  text-gray-400 pe-3 min-w-100px">
									ฟิลด์ :
								</th>
								<th class="text-center  text-gray-400 pe-3 min-w-100px">
									Action
								</th>
							</tr>

							<!--end::Table row-->
						</thead>
						<!--end::Table head-->
						<tbody id="data_type">
							<tr>
								<td class="text-start  pe-3 min-w-10px">1</td>
								<td class="text-start  pe-3 min-w-100px">P/O</td>
								<td class="text-center  pe-3 min-w-100px">
									<i class="ki-duotone ki-pencil me-3">
										<button class="btn btn-warning">แก้ไข</button>
									</i><i class="ki-duotone ki-trash">
										<button class="btn btn-danger">ลบ</button>
									</i>
								</td>
							</tr>
							<tr>
								<td class="text-start  pe-3 min-w-10px">2</td>
								<td class="text-start  pe-3 min-w-100px">Forecast</td>
								<td class="text-center  pe-3 min-w-100px">
									<i class="ki-duotone ki-pencil me-3">
										<span class="path1"></span>
										<span class="path2"></span>
									</i><i class="ki-duotone ki-trash">
										<span class="path1"></span>
										<span class="path2"></span>
										<span class="path3"></span>
										<span class="path4"></span>
										<span class="path5"></span>
									</i>
								</td>
							</tr>
							<tr>
								<td class="text-start  pe-3 min-w-10px">3</td>
								<td class="text-start  pe-3 min-w-100px">Schedule</td>
								<td class="text-center  pe-3 min-w-100px">
									<i class="ki-duotone ki-pencil me-3">
										<span class="path1"></span>
										<span class="path2"></span>
									</i><i class="ki-duotone ki-trash">
										<span class="path1"></span>
										<span class="path2"></span>
										<span class="path3"></span>
										<span class="path4"></span>
										<span class="path5"></span>
									</i>
								</td>
							</tr>
							<tr>
								<td class="text-start  pe-3 min-w-10px">4</td>
								<td class="text-start  pe-3 min-w-100px">SCP</td>
								<td class="text-center  pe-3 min-w-100px">
									<i class="ki-duotone ki-pencil me-3">
										<span class="path1"></span>
										<span class="path2"></span>
									</i><i class="ki-duotone ki-trash">
										<span class="path1"></span>
										<span class="path2"></span>
										<span class="path3"></span>
										<span class="path4"></span>
										<span class="path5"></span>
									</i>
								</td>
							</tr>
							<tr>
								<td class="text-start  pe-3 min-w-10px">5</td>
								<td class="text-start  pe-3 min-w-100px">Paki</td>
								<td class="text-center  pe-3 min-w-100px">
									<i class="ki-duotone ki-pencil me-3">
										<span class="path1"></span>
										<span class="path2"></span>
									</i><i class="ki-duotone ki-trash">
										<span class="path1"></span>
										<span class="path2"></span>
										<span class="path3"></span>
										<span class="path4"></span>
										<span class="path5"></span>
									</i>
								</td>
							</tr>
							<tr>
								<td class="text-start  pe-3 min-w-10px">6</td>
								<td class="text-start  pe-3 min-w-100px">Export</td>
								<td class="text-center  pe-3 min-w-100px">
									<i class="ki-duotone ki-pencil me-3">
										<span class="path1"></span>
										<span class="path2"></span>
									</i><i class="ki-duotone ki-trash">
										<span class="path1"></span>
										<span class="path2"></span>
										<span class="path3"></span>
										<span class="path4"></span>
										<span class="path5"></span>
									</i>
								</td>
							</tr>
						</tbody>
					</table>
					<!--end::Table-->


				</div>
				<!--end::Form-->
			</div>
			<!--end::Modal body-->
		</div>
		<!--end::Modal content-->
	</div>
	<!--end::Modal dialog-->
</div>
<!--end::popup-->

<script>
	const showDialogAddUser = ()=>
	{
		let modal = document.getElementById("modal_add_user");
		modal.classList.toggle("show")
		if(modal.classList.contains("show")){
			modal.style.display = "block";

		}else{
			modal.style.display = "none";
		}
	}

	window.onload = async () => {

		const selectCustumer = document.getElementById("custumer_select");
		const listUser = await fetch("/order/JsonUsers");
		const users_json = await listUser.json();
		selectCustumer.innerHTML = users_json.reduce((prev, curr) => prev += `<option value="{${curr?.custID}">${curr?.custID}-${curr?.custName} </option>`, `<option selected > </option>`);
		
		const dataType = await fetch("/order/JsonDataType_MS");
		const data_type = await dataType.json();
		const select_data_type = document.getElementById("select_data_type");
		select_data_type.innerHTML = data_type.reduce((prev, curr) => prev += `<option value="${curr?.typeCode}">${curr?.typeName}</option>`, "<option selected></option>");
		const modal_data_type = document.getElementById("data_type");
		modal_data_type.innerHTML = data_type.reduce((prev, curr, index) => prev += `							
								<tr>
										<td class="text-start  pe-3 min-w-10px">${index+1}</td>
										<td class="text-start  pe-3 min-w-100px">${curr?.typeName}</td>
									<td class="text-center  pe-3 min-w-100px">
										<i class="ki-duotone ki-pencil me-3">
												<button class="btn btn-warning" disabled>แก้ไข</button>
										</i><i class="ki-duotone ki-trash">
												<button class="btn btn-danger" disabled>ลบ</button>
										</i>
									</td>
								</tr>`,"");
		
	};

	const addDataType = ()=>{
		const name = document.getElementById("type_name");
		fetch("/Order/AddDataType?name=" + name.value, { method: "post" }).then(res => res.json()).then(data => {
			if (data.msg) {
				Swal.fire({
					position: 'top-end',
					icon: 'success',
					title: data.msg,
					showConfirmButton: false,
					timer: 1500
				}).then(resault => {
					window.location.reload();
				});
			} else {
				Swal.fire('Error > ' + data.error);
			}
		}).catch(error => console.log(error));

	}

	const addDataTypeCus =()=>{
		const form = document.getElementById("data_type_form");
		const formData = new FormData(form);
		fetch("/Order/AddDataType").then(res => res.json()).then(data => {
			if (data.msg) {
				Swal.fire({
					position: 'top-end',
					icon: 'success',
					title: data.msg,
					showConfirmButton: false,
					timer: 1500
				}).then(resault => {
					window.location.reload();
				});
			} else {
				Swal.fire('Error > ' + data.error);
			}
		}).catch(error => console.log(error));
	}
</script>
